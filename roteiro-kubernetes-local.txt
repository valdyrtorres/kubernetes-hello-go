** Instalar o cliente kubernetes:
kubectl
https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
Validando (opcional):
curl -LO "https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256"
echo "$(cat kubectl.sha256)  kubectl" | sha256sum --check

*** Instalando de fato:
sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl

kubectl version --client

Or use this for detailed view of version:

kubectl version --client --output=yaml


** Instalar o kind
go install sigs.k8s.io/kind@v0.20.0

----------

kind create cluster
kubectl cluster-info --context kind-kind

ls -l ~/.kube

kubectl get nodes

kind get clusters
kind delete clusters kind
kind get clusters
kind create cluster --config=k8s/kind.yaml --name=fullcycle

kubectl cluster-info --context kind-fullcycle

kubectl cluster-info

kubectl config get-clusters

kubectl config use-context cluster-fulano-de-tal

Obs: Descobri qual serviço usa a porta 80
sudo lsof -i -P -n | grep LISTEN
sudo netstat -tunap | grep :80
sudo fuser 80/tcp
sudo lsof -i tcp:80 -s tcp:listen

sudo /etc/init.d/apache2 stop
sudo systemctl disable apache2

go run server.go
docker build -t valdyrtorres/hello-go .
docker run --rm -p 80:80 valdyrtorres/hello-go
--------------------------------------------------
kubectl apply -f k8s/pod.yaml
kubectl get pod

kubectl port-forward pod/goserver 8000:80

kubectl delete pod goserver

kubectl apply -f k8s/replicaset.yaml

kubectl get pods

kubectl get replicasets

kubectl delete pod goserver-vhp82

kubectl describe pod goserver-fw22w

kubectl delete pod goserver-fw22w

kubectl describe pod goserver-q4w28 

ATENÇÃO: O replicaset tem um problema que quando você atualiza o yaml, ele não contempla a nova versão, 
a não ser que você delete um pod, aí outro é criado com a nova configuração. Mas, tem como resolver isso: Objeto Deployment

Deployment -> ReplicaSet -> Pod

kubectl apply -f k8s/deployment.yaml

kubectl get deployments

kubectl get replicasets

kubectl rollout history deployment goserver

Voltar a replicaset anterior (rollback)
kubectl rollout undo deployment goserver

kubectl rollout undo deployment goserver --to-revision=2

kubectl describe deployment goserver
---------------------------------------------------
Service X -> Atua como um load balance de aplicativos
kubectl apply -f k8s/service.yaml

kubectl get services ou kubectl get svc

kubectl port-forward svc/goserver-service 8000:80

Listagem das api's do kubernetes:
kubectl proxy --port=8080

kubectl get svc

kubectl delete svc goserver-service




